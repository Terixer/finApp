{% extends 'period/period_base.html.twig' %}

{% block title %}Okresy rozliczeniowe
{% endblock %}

{% block content %}

	<div class="col-lg-12 grid-margin stretch-card">
		<div class="card">
			<div class="card-body">
				<a href="{{ path('period_new') }}" class="btn btn-gradient-success btn-fw mb-4">Dodaj nowy</a>
				<table class="table table-hover">
					<thead>
						<tr>
							<th>#</th>
							<th>Nazwa</th>
							<th>Okres od</th>
							<th>Okres do</th>
							<th style="width:20%">Progress</th>
							<th style="width:20%">Akcje</th>
						</tr>
					</thead>
					<tbody>
						{% for period in periods %}
							<tr>
								<td>{{ period.id }}</td>
								<td>{{ period.name }}</td>
								<td>{{ period.dateFrom ? period.dateFrom|date('Y-m-d  h:i') : '' }}</td>
								<td>{{ period.dateTo ? period.dateTo|date('Y-m-d  h:i') : '' }}</td>
								<td>
									{{ include('parts/elements/_progress_bar.html.twig',{'progress': dateProgress(period.dateFrom,period.dateTo)})}}
								</td>
								<td>
									{{ include('parts/form/action_buttons/_show_action.html.twig', {
                                        'path': path('period_show', {'id': period.id}) 
                                    })}}
									{{ include('parts/form/action_buttons/_edit_action.html.twig', {
                                        'path': path('period_edit', {'id': period.id}) 
                                    })}}
									{{ include('parts/form/action_buttons/_delete_action.html.twig', {
                                        'path': path('period_delete', {'id': period.id}), 
                                        'token': csrf_token('delete' ~ period.id) 
                                    })}}
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="6">Brak okres√≥w rozliczeniowych</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>

{% endblock %}
